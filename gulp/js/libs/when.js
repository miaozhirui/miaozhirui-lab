!function(n,t){"use strict";n(function(require){function n(n,t,r,u){return e(n).then(t,r,u)}function e(n){return n instanceof r?n:u(n)}function r(n,t){this._message=n,this.inspect=t}function u(n){return f(function(t){t(n)})}function i(t){return n(t,h)}function o(){function n(n,i,o){t.resolve=t.resolver.resolve=function(t){return r?u(t):(r=!0,n(t),e)},t.reject=t.resolver.reject=function(n){return r?u(h(n)):(r=!0,i(n),e)},t.notify=t.resolver.notify=function(n){return o(n),n}}var t,e,r;return t={promise:Q,resolve:Q,reject:Q,notify:Q,resolver:{resolve:Q,reject:Q,notify:Q}},t.promise=e=f(n),t}function f(n){return c(n,I.PromiseStatus&&I.PromiseStatus())}function c(n,t){function e(n,t,e,r){function u(u){u._message(n,t,e,r)}l?l.push(u):S(function(){u(a)})}function u(){return a?a.inspect():L()}function i(n){if(l){var e=l;l=Q,S(function(){a=v(c,n),t&&w(a,t),s(e,a)})}}function o(n){i(h(n))}function f(n){if(l){var t=l;S(function(){s(t,p(n))})}}var c,a,l=[];c=new r(e,u),c._status=t;try{n(i,o,f)}catch(y){o(y)}return c}function s(n,t){for(var e=0;e<n.length;e++)n[e](t)}function a(n){return l(new d(n),function(){return P(n)})}function h(n){return l(new m(n),function(){return E(n)})}function l(n,t){return new r(function(t,e,r){try{r(n[t].apply(n,e))}catch(u){r(h(u))}},t)}function p(n){return new r(function(t,e,r,u){var i=e[2];try{u("function"==typeof i?i(n):n)}catch(o){u(o)}})}function v(n,t){if(t===n)return h(new TypeError);if(t instanceof r)return t;try{var e=t===Object(t)&&t.then;return"function"==typeof e?y(e,t):a(t)}catch(u){return h(u)}}function y(n,t){return f(function(e,r){K(n,t,e,r)})}function d(n){this.value=n}function m(n){this.reason=n}function w(n,t){function e(){t.fulfilled()}function r(n){t.rejected(n)}n.then(e,r)}function g(n){return n&&"function"==typeof n.then}function b(t,e,r,u,i){return n(t,function(t){function o(r,u,i){function o(n){p(n)}function f(n){l(n)}var c,s,a,h,l,p,v,y;if(v=t.length>>>0,c=Math.max(0,Math.min(e,v)),a=[],s=v-c+1,h=[],c)for(p=function(n){h.push(n),--s||(l=p=q,u(h))},l=function(n){a.push(n),--c||(l=p=q,r(a))},y=0;v>y;++y)y in t&&n(t[y],f,o,i);else r(a)}return f(o).then(r,u,i)})}function j(n,t,e,r){function u(n){return t?t(n[0]):n[0]}return b(n,1,u,e,r)}function x(n,t,e,r){return k(n,q).then(t,e,r)}function O(){return k(arguments,q)}function _(n){return k(n,P,E)}function T(n,t){return k(n,t)}function k(t,e,r){return n(t,function(t){function u(u,i,o){function f(t,f){n(t,e,r).then(function(n){c[f]=n,--a||u(c)},i,o)}var c,s,a,h;if(a=s=t.length>>>0,c=[],!a)return void u(c);for(h=0;s>h;h++)h in t?f(t[h],h):--a}return c(u)})}function M(t,e){var r=K(F,arguments,1);return n(t,function(t){var u;return u=t.length,r[0]=function(t,r,i){return n(t,function(t){return n(r,function(n){return e(t,n,i,u)})})},C.apply(t,r)})}function P(n){return{state:"fulfilled",value:n}}function E(n){return{state:"rejected",reason:n}}function L(){return{state:"pending"}}function S(n){1===z.push(n)&&W(U)}function U(){s(z),z=[]}function q(n){return n}function A(n){throw"function"==typeof I.reportUnhandled?I.reportUnhandled():S(function(){throw n}),n}n.promise=f,n.resolve=u,n.reject=i,n.defer=o,n.join=O,n.all=x,n.map=T,n.reduce=M,n.settle=_,n.any=j,n.some=b,n.isPromise=g,n.isPromiseLike=g,r.prototype={then:function(){var n,t;return n=arguments,t=this._message,c(function(e,r,u){t("when",n,e,u)},this._status&&this._status.observed())},otherwise:function(n){return this.then(Q,n)},ensure:function(n){function t(){return u(n())}return"function"==typeof n?this.then(t,t)["yield"](this):this},done:function(n,t){this.then(n,t).otherwise(A)},"yield":function(n){return this.then(function(){return n})},tap:function(n){return this.then(n)["yield"](this)},spread:function(n){return this.then(function(t){return x(t,function(t){return n.apply(Q,t)})})},always:function(n,t){return this.then(n,n,t)}},d.prototype.when=function(n){return"function"==typeof n?n(this.value):this.value},m.prototype.when=function(n,t){if("function"==typeof t)return t(this.reason);throw this.reason};var C,F,K,W,z,B,D,G,H,I,J,N,Q;if(J=require,z=[],B=t.setTimeout,I="undefined"!=typeof console?console:n,"object"==typeof process&&process.nextTick)W=process.nextTick;else if(N=t.MutationObserver||t.WebKitMutationObserver)W=function(n,t,e){var r=n.createElement("div");return new t(e).observe(r,{attributes:!0}),function(){r.setAttribute("x","x")}}(document,N,U);else try{W=J("vertx").runOnLoop||J("vertx").runOnContext}catch(R){W=function(n){B(n,0)}}return D=Function.prototype,G=D.call,K=D.bind?G.bind(G):function(n,t){return n.apply(t,F.call(arguments,2))},H=[],F=H.slice,C=H.reduce||function(n){var t,e,r,u,i;if(i=0,t=Object(this),u=t.length>>>0,e=arguments,e.length<=1)for(;;){if(i in t){r=t[i++];break}if(++i>=u)throw new TypeError}else r=e[1];for(;u>i;++i)i in t&&(r=n(r,t[i],i,t));return r},n})}("function"==typeof define?define:function(n){module.exports=n(require)},this);